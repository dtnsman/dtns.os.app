(("undefined"!==typeof self?self:this)["webpackJsonpk_form_design"]=("undefined"!==typeof self?self:this)["webpackJsonpk_form_design"]||[]).push([[34],{d95a:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{style:{textAlign:e.record.options.textAlign,transform:"translateY(-2px)",paddingRight:"8px"}},[t("img",{class:{"ant-form-item-required":e.record.options.showRequiredMark},attrs:{src:e.imgSrc,width:"100%"}})])},i=[],a=(n("551c"),n("f559"),n("96cf"),n("1da1")),s={name:"KImage",props:["record","value"],data:function(){return{imgSrc:""}},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.setValue();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{value:{handler:function(e){e&&this.setValue()}}},methods:{setValue:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,!this.value||!this.value.startsWith("data:image/")){e.next=4;break}return t.imgSrc=this.value,e.abrupt("return");case 4:return e.next=6,window.imageDb.getDataByKey(this.value);case 6:n=e.sent,n?this.imgSrc=n.data:(r={user_id:localStorage.user_id,s_id:localStorage.s_id,filename:this.value,img_kind:"open",img_p:"min200"},new Promise((function(e,t){if(!r||!r.filename)return e({ret:!1,msg:"param(filename) is null"});window.rpc_client.send("/image/view",r,null,(function(t){console.log("rdata:"+JSON.stringify(t)),e(t.data)})),setTimeout((function(){return t(null)}),3e4)})).then((function(e){t.imgSrc="data:image/png;base64,"+e.data,window.imageDb.addData({img_id:t.value,data:t.imgSrc})})).catch((function(e){console.log("load img error",e)})));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},u=s,o=n("2877"),c=Object(o["a"])(u,r,i,!1,null,null,null),l=c.exports;t["default"]=l}}]);