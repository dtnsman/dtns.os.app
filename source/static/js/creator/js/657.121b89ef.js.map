{"version":3,"file":"js/657.121b89ef.js","mappings":"oKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,MAAoB,MAAZF,EAAII,KAAcF,EAAG,MAAM,CAACA,EAAG,MAAM,CAACG,MAAM,CAAC,IAAML,EAAIM,UAAUC,IAAI,MAAQ,QAAQ,OAAS,SAASC,GAAG,CAAC,MAAQR,EAAIS,aAAaP,EAAG,MAAM,CAACA,EAAG,MAAM,CAACG,MAAM,CAAC,IAAML,EAAIM,UAAUI,KAAK,MAAQ,QAAQ,OAAS,WAAWR,EAAG,OAAO,CAACS,YAAY,CAAC,MAAQ,QAAQ,SAAW,SAAS,gBAAgB,WAAW,mBAAmB,aAAa,CAACX,EAAIY,GAAGZ,EAAIa,GAAGb,EAAIc,eACza,EACGC,EAAkB,G,UCwBtB,G,wCAAA,CACAC,QAAAA,EAAAA,EACAC,MAAAA,CACAX,UAAAA,CACAY,KAAAA,OACAC,UAAAA,EACAC,QAAAA,OAEAb,IAAAA,8HAEAc,QAAAA,CACAH,KAAAA,OACAE,QAAAA,SAGAE,OACA,OACAlB,MAAAA,EACAU,UAAAA,GAEA,EACAS,UACA,gBAEA,0CACA,gDACAC,QAAAA,IAAAA,iBAAAA,KAAAA,UAAAA,IAEA,IACA,wCACA,eAEA,EACAC,QAAAA,CACAhB,UACA,mBACA,SAEAiB,MAAAA,mBACA,wCACAC,EAAAA,aAAAA,OAAAA,QACA,WAKAA,EAAAA,iBAAAA,UAAAA,iBAEA,GADAH,QAAAA,IAAAA,QAAAA,KAAAA,OACA,2CAEAA,QAAAA,IAAAA,gBAAAA,KAAAA,UAAAA,KAAAA,MAAAA,GAAAA,OAOA,uBACAI,EAAAA,OAAAA,iBACAJ,QAAAA,IAAAA,UAAAA,EAAAA,QACA,2BACAK,EAAAA,QAAAA,YAAAA,SACA,gEACA,uCACA,2EACAL,QAAAA,IAAAA,oBAAAA,KAAAA,UAAAA,IAOA,wCACAK,EAAAA,KAAAA,KACAA,EAAAA,UAAAA,EAAAA,aAAAA,UACAA,EAAAA,SAAAA,SACA,4BACA,iCACA,0BACAC,EAAAA,YAAAA,UAAAA,EAAAA,aAAAA,UAEAC,aAAAA,QAAAA,kBAAAA,KAAAA,UAAAA,IACAP,QAAAA,IAAAA,mBAAAA,KAAAA,UAAAA,IAeA,EAEAI,EAAAA,WAAAA,KAAAA,MAAAA,GACA,IAEAD,EAAAA,OACA,KCjIkQ,I,UCQ9PK,GAAY,OACd,EACAjC,EACAgB,GACA,EACA,KACA,WACA,MAIF,EAAeiB,EAAiB,O,2DCnB5BjC,EAAQgB,E,UCGZ,GACAE,MAAAA,CACAgB,QAAAA,CACAf,KAAAA,OACAE,QAAAA,QAEAC,QAAAA,CACAH,KAAAA,OACAE,QAAAA,SAGAG,UACA,6BACAW,EAAAA,EAAAA,IAAAA,UAAAA,KAAAA,SACAA,EAAAA,EAAAA,IAAAA,UAAAA,KAAAA,SAEA,EACAC,UACA,WAAAb,EAAAA,SAAAc,GAAA,iBACA,YACA,sCAEA,EACAC,gBACA,6BACAH,EAAAA,EAAAA,KAAAA,UAAAA,KAAAA,SACAA,EAAAA,EAAAA,KAAAA,UAAAA,KAAAA,SAEA,EACAT,QAAAA,CACAa,YAAAA,EAAAA,IACAhB,EAAAA,SAAAA,IACAiB,EAAAA,MAAAA,SAAAA,IACA,QACA,kCACA,GAHA,GAMA,EAEAC,QAAAA,GACA,qEACA,mBACA,EAEAC,QAAAA,GACA,qEACA,mBACA,ICnDgQ,I,UFO5PT,GAAY,OACd,EACAjC,EACAgB,GACA,EACA,KACA,KACA,MAIF,EAAeiB,EAAiB,O","sources":["webpack://dtns.creator/./src/custom-component/CAUTH/Component.vue","webpack://dtns.creator/src/custom-component/CAUTH/Component.vue","webpack://dtns.creator/./src/custom-component/CAUTH/Component.vue?447f","webpack://dtns.creator/./src/custom-component/CAUTH/Component.vue?80b7","webpack://dtns.creator/./src/custom-component/common/OnEvent.vue","webpack://dtns.creator/src/custom-component/common/OnEvent.vue","webpack://dtns.creator/./src/custom-component/common/OnEvent.vue?d8a8"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isok != 'ok')?_c('div',[_c('img',{attrs:{\"src\":_vm.propValue.url,\"width\":\"100px\",\"height\":\"100px\"},on:{\"click\":_vm.onclick}})]):_c('div',[_c('img',{attrs:{\"src\":_vm.propValue.url1,\"width\":\"100px\",\"height\":\"100px\"}}),_c('span',{staticStyle:{\"width\":\"300px\",\"overflow\":\"hidden\",\"text-overflow\":\"ellipsis\",\"-o-text-overflow\":\"ellipsis\"}},[_vm._v(_vm._s(_vm.token_key))])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div\r\n        v-if=\"isok != 'ok'\"\r\n    >\r\n        <img :src='propValue.url' \r\n             width=\"100px\" \r\n             height=\"100px\" \r\n             @click=\"onclick\">\r\n    </div>\r\n    <div v-else>\r\n        <img :src='propValue.url1' \r\n             width=\"100px\" \r\n             height=\"100px\" >\r\n        <span style='width:300px;overflow: hidden; text-overflow: ellipsis; -o-text-overflow: ellipsis;'>{{ token_key }}</span>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport OnEvent from '../common/OnEvent'\r\nimport protocol from '../../utils/dnalink_protocol_config'\r\nimport CryptoJS from 'crypto-js'\r\nimport sha256 from 'crypto-js/sha256'\r\nimport md5 from 'crypto-js/md5'\r\n// import { bs58Encode } from '../../utils/key_util'\r\nimport bs58 from 'bs58'\r\n\r\nexport default {\r\n    extends: OnEvent,\r\n    props: {\r\n        propValue: {\r\n            type: Object,\r\n            required: true,\r\n            default: () => {},\r\n            // eslint-disable-next-line\r\n            url: 'http://ec2-52-81-96-59.cn-north-1.compute.amazonaws.com.cn:61000/node.lauo.valuetest/chain/file/valuetest_filezG8jnpsSTiLi'\r\n        },\r\n        element: {\r\n            type: Object,\r\n            default: () => {},\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            isok: false,\r\n            token_key: '',\r\n        }\r\n    },\r\n    created() {\r\n        this.propCTX = {}\r\n        // eslint-disable-next-line\r\n        this.poplang = new PopRuntime(this.propCTX)\r\n        const protocolCache = localStorage.getItem('protocol_config')\r\n        console.log('protocolCache:' + JSON.stringify(protocolCache))\r\n\r\n        if (protocolCache) {\r\n            this.poplang.setProtocol(JSON.parse(protocolCache))\r\n            this.isok = 'ok'\r\n        }\r\n    },\r\n    methods: {\r\n        onclick() {\r\n            if (this.isok == 'ok') {\r\n                return 0\r\n            }\r\n            alert('请选择密钥配置文件（ROOT）')\r\n            const a = document.createElement('input')\r\n            a.setAttribute('type', 'file')\r\n            let This = this\r\n            // console.log('this:' + this.)\r\n\r\n            // let pkey = newPrivateKey()\r\n            // console.log('pkey:'+pkey)\r\n            a.addEventListener('change', async function selectedFileChanged() {\r\n                console.log('data:' + this.files)\r\n                if (this.files.length == 0) return alert('请选择文件')\r\n\r\n                console.log('upload-files:' + JSON.stringify(this.files[0].name))\r\n                \r\n                // This.propCTX['file'] = this.files[0]\r\n                // await This.poplang.op(null,'set','filename',this.files[0].name)\r\n                // let uploadRet = await This.poplang.op(null,'file.upload','x','x','x','x','file','upload_ret')\r\n                // This.poplang.op(null,'del','upload_ret')\r\n                // console.log('uploadRet:'+JSON.stringify(uploadRet))\r\n                const reader = new FileReader()\r\n                reader.onload = async function fileReadCompleted() {\r\n                    console.log('result:' + reader.result)\r\n                    let protocol0 = JSON.parse(reader.result)\r\n                    This.poplang.setProtocol(protocol0) \r\n                    await This.poplang.op(null, 'set', 'token', protocol0.root_config.TOKEN_ROOT)\r\n                    await This.poplang.op(null, 'set', 'opval', 60 * 60 * 24 * 100)\r\n                    let result = await This.poplang.op(null, 'token.key', 'token', 'token', 'opval', 'token')\r\n                    console.log('token-key-result:' + JSON.stringify(result))\r\n\r\n                    // await This.poplang.op(null, 'set', 'n', 'new')\r\n                    // let forkResult = await This.poplang.op(null, 'fork', 'n', 'token', 'opval', 'token')\r\n                    // console.log('private_key:' + forkResult.private_key)\r\n                    // console.log('fork-result:' + JSON.stringify(forkResult))\r\n\r\n                    if (result.ret && result.rpc_func_ret && result.rpc_func_ret) {\r\n                        This.isok = 'ok'\r\n                        This.token_key = result.rpc_func_ret.token_key\r\n                        This.protocol = protocol0\r\n                        delete protocol0.root_config.appids\r\n                        delete protocol0.root_config.secret_keys\r\n                        delete protocol0.root_config.private_key\r\n                        protocol0.root_config.token_key = result.rpc_func_ret.token_key\r\n\r\n                        localStorage.setItem('protocol_config', JSON.stringify(protocol0))\r\n                        console.log('protocol-cached:' + JSON.stringify(protocol0))\r\n                    }\r\n                    // var aestext = CryptoJS.AES.encrypt(reader.result, '302').toString();\r\n                    // console.log('aestext:'+aestext)\r\n                    // var decodeText =  CryptoJS.AES.decrypt(aestext,'302').toString(CryptoJS.enc.Utf8)\r\n                    // console.log('decodeText:'+decodeText)\r\n                    // console.log('text-md5:'+ md5(decodeText))\r\n                    // console.log('text-sha256:'+sha256(decodeText))\r\n\r\n                    // console.log('text:' + reader.result\r\n                    // let { style, data } = JSON.parse(reader.result)\r\n                    // // This.canvasStyleData = style\r\n                    // console.log('style:' + JSON.stringify(style))\r\n                    // This.$store.commit('setCanvasStyle', style)\r\n                    // This.$store.commit('setComponentData', data)\r\n                }\r\n\r\n                reader.readAsText(this.files[0])\r\n            })\r\n\r\n            a.click()\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.v-button {\r\n    display: inline-block;\r\n    line-height: 1;\r\n    white-space: nowrap;\r\n    cursor: pointer;\r\n    background: #fff;\r\n    border: 1px solid #dcdfe6;\r\n    color: #606266;\r\n    -webkit-appearance: none;\r\n    text-align: center;\r\n    box-sizing: border-box;\r\n    outline: 0;\r\n    margin: 0;\r\n    transition: .1s;\r\n    font-weight: 500;\r\n    width: 100%;\r\n    height: 100%;\r\n    font-size: 14px;\r\n\r\n    &:active {\r\n        color: #3a8ee6;\r\n        border-color: #3a8ee6;\r\n        outline: 0;\r\n    }\r\n\r\n    &:hover {\r\n        background-color: #ecf5ff;\r\n        color: #3a8ee6;\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Component.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Component.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Component.vue?vue&type=template&id=c6400c8a&scoped=true&\"\nimport script from \"./Component.vue?vue&type=script&lang=js&\"\nexport * from \"./Component.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Component.vue?vue&type=style&index=0&id=c6400c8a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c6400c8a\",\n  null\n  \n)\n\nexport default component.exports","var render, staticRenderFns\nimport script from \"./OnEvent.vue?vue&type=script&lang=js&\"\nexport * from \"./OnEvent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport eventBus from '@/utils/eventBus'\n\nexport default {\n    props: {\n        linkage: {\n            type: Object,\n            default: () => {},\n        },\n        element: {\n            type: Object,\n            default: () => {},\n        },\n    },\n    created() {\n        if (this.linkage?.data?.length) {\n            eventBus.$on('v-click', this.onClick)\n            eventBus.$on('v-hover', this.onHover)\n        }\n    },\n    mounted() {\n        const { data, duration } = this.linkage || {}\n        if (data?.length) {\n            this.$el.style.transition = `all ${duration}s`\n        }\n    },\n    beforeDestroy() {\n        if (this.linkage?.data?.length) {\n            eventBus.$off('v-click', this.onClick)\n            eventBus.$off('v-hover', this.onHover)\n        }\n    },\n    methods: {\n        changeStyle(data = []) {\n            data.forEach(item => {\n                item.style.forEach(e => {\n                    if (e.key) {\n                        this.element.style[e.key] = e.value\n                    }\n                })\n            })\n        },\n\n        onClick(componentId) {\n            const data = this.linkage.data.filter(item => item.id === componentId && item.event === 'v-click')\n            this.changeStyle(data)\n        },\n\n        onHover(componentId) {\n            const data = this.linkage.data.filter(item => item.id === componentId && item.event === 'v-hover')\n            this.changeStyle(data)\n        },\n    },\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OnEvent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OnEvent.vue?vue&type=script&lang=js&\""],"names":["render","_vm","this","_c","_self","isok","attrs","propValue","url","on","onclick","url1","staticStyle","_v","_s","token_key","staticRenderFns","extends","props","type","required","default","element","data","created","console","methods","alert","a","reader","This","protocol0","localStorage","component","linkage","eventBus","mounted","duration","beforeDestroy","changeStyle","item","onClick","onHover"],"sourceRoot":""}