(self["webpackChunkdtns_creator"]=self["webpackChunkdtns_creator"]||[]).push([[641],{5641:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return f}});var n=function(){var t=this,e=t._self._c;return"edit"==t.editMode?e("div",{staticClass:"v-text",on:{keydown:t.handleKeydown,keyup:t.handleKeyup}},[e("div",{ref:"text",class:{"can-edit":t.canEdit},style:{verticalAlign:t.element.style.verticalAlign},attrs:{contenteditable:t.canEdit,tabindex:"0"},domProps:{innerHTML:t._s(t.element.propValue)},on:{dblclick:t.setEdit,paste:t.clearStyle,mousedown:t.handleMousedown,blur:t.handleBlur,input:t.handleInput}})]):e("div",{staticClass:"v-text preview",on:{click:t.clickNow}},[e("div",{style:{verticalAlign:t.element.style.verticalAlign},domProps:{innerHTML:t._s(t.mtext?t.mtext:t.element.propValue)}})])},o=[],i=(r(8675),r(3462),r(7380),r(1118),r(6699),r(629)),a=r(9657),s=r(4471),c=r(2689),u=(r(7532),r(1354),r(2153),r(8214),r(7191),{extends:c.Z,props:{propValue:{type:String,required:!0,default:""},request:{type:Object,default:()=>{}},element:{type:Object,default:()=>{}},linkage:{type:Object,default:()=>{}}},data(){return{canEdit:!1,ctrlKey:17,isCtrlDown:!1,cancelRequest:null,propCTX:"",mtext:null}},computed:{...(0,i.rn)(["editMode"])},async created(){this.request&&(this.cancelRequest=(0,s.ZP)(this.request,this.element,"propValue","string")),this.poplang=new PopRuntime(this),this.poplang.binderAddOpcode("init",(async()=>{this.xdata=this.element.xdata,console.log("this.xdata:",this.xdata),await this.poplang.runScript(null,this.element.code),console.log("code:"+this.element.code,"mtext:",this.mtext)})),this.element.poplang=this.poplang},beforeDestroy(){this.request&&this.cancelRequest()},methods:{handleInput(t){this.$emit("input",this.element,t.target.innerHTML)},handleKeydown(t){this.canEdit&&t.stopPropagation(),t.keyCode==this.ctrlKey?this.isCtrlDown=!0:(this.isCtrlDown&&this.canEdit&&a.k.includes(t.keyCode)||46==t.keyCode)&&t.stopPropagation()},handleKeyup(t){this.canEdit&&t.stopPropagation(),t.keyCode==this.ctrlKey&&(this.isCtrlDown=!1)},handleMousedown(t){this.canEdit&&t.stopPropagation()},async clickNow(t){let e=await this.poplang.op(null,"onclick");console.log("VText-onclick-ret:",e)},clearStyle(t){t.preventDefault();const e=t.clipboardData,r=e.getData("text/plain")||"";""!==r&&document.execCommand("insertText",!1,r),this.$emit("input",this.element,t.target.innerHTML)},handleBlur(t){this.element.propValue=t.target.innerHTML||"&nbsp;";const e=t.target.innerHTML;""!==e?this.element.propValue=t.target.innerHTML:(this.element.propValue="",this.$nextTick((()=>{this.element.propValue="&nbsp;"}))),this.canEdit=!1},setEdit(){this.element.isLock||(this.canEdit=!0,this.selectText(this.$refs.text))},selectText(t){const e=window.getSelection(),r=document.createRange();r.selectNodeContents(t),e.removeAllRanges(),e.addRange(r)}}}),l=u,p=r(1001),d=(0,p.Z)(l,n,o,!1,null,"0a73a610",null),f=d.exports},2689:function(t,e,r){"use strict";r.d(e,{Z:function(){return l}});var n,o,i=r(4003),a={props:{linkage:{type:Object,default:()=>{}},element:{type:Object,default:()=>{}}},created(){this.linkage?.data?.length&&(i.Z.$on("v-click",this.onClick),i.Z.$on("v-hover",this.onHover))},mounted(){const{data:t,duration:e}=this.linkage||{};t?.length&&(this.$el.style.transition=`all ${e}s`)},beforeDestroy(){this.linkage?.data?.length&&(i.Z.$off("v-click",this.onClick),i.Z.$off("v-hover",this.onHover))},methods:{changeStyle(t=[]){t.forEach((t=>{t.style.forEach((t=>{t.key&&(this.element.style[t.key]=t.value)}))}))},onClick(t){const e=this.linkage.data.filter((e=>e.id===t&&"v-click"===e.event));this.changeStyle(e)},onHover(t){const e=this.linkage.data.filter((e=>e.id===t&&"v-hover"===e.event));this.changeStyle(e)}}},s=a,c=r(1001),u=(0,c.Z)(s,n,o,!1,null,null,null),l=u.exports},6077:function(t,e,r){var n=r(614),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||n(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},4019:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,r){"use strict";var n,o,i,a=r(4019),s=r(9781),c=r(7854),u=r(614),l=r(111),p=r(2597),d=r(648),f=r(6330),h=r(8880),y=r(8052),g=r(3070).f,v=r(7976),A=r(9518),m=r(7674),x=r(5112),T=r(9711),w=r(9909),k=w.enforce,b=w.get,_=c.Int8Array,E=_&&_.prototype,C=c.Uint8ClampedArray,O=C&&C.prototype,R=_&&A(_),I=E&&A(E),M=Object.prototype,S=c.TypeError,j=x("toStringTag"),P=T("TYPED_ARRAY_TAG"),V="TypedArrayConstructor",L=a&&!!m&&"Opera"!==d(c.opera),D=!1,$={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},q={BigInt64Array:8,BigUint64Array:8},Z=function(t){if(!l(t))return!1;var e=d(t);return"DataView"===e||p($,e)||p(q,e)},H=function(t){var e=A(t);if(l(e)){var r=b(e);return r&&p(r,V)?r[V]:H(e)}},U=function(t){if(!l(t))return!1;var e=d(t);return p($,e)||p(q,e)},N=function(t){if(U(t))return t;throw S("Target is not a typed array")},B=function(t){if(u(t)&&(!m||v(R,t)))return t;throw S(f(t)+" is not a typed array constructor")},F=function(t,e,r,n){if(s){if(r)for(var o in $){var i=c[o];if(i&&p(i.prototype,t))try{delete i.prototype[t]}catch(a){try{i.prototype[t]=e}catch(u){}}}I[t]&&!r||y(I,t,r?e:L&&E[t]||e,n)}},K=function(t,e,r){var n,o;if(s){if(m){if(r)for(n in $)if(o=c[n],o&&p(o,t))try{delete o[t]}catch(i){}if(R[t]&&!r)return;try{return y(R,t,r?e:L&&R[t]||e)}catch(i){}}for(n in $)o=c[n],!o||o[t]&&!r||y(o,t,e)}};for(n in $)o=c[n],i=o&&o.prototype,i?k(i)[V]=o:L=!1;for(n in q)o=c[n],i=o&&o.prototype,i&&(k(i)[V]=o);if((!L||!u(R)||R===Function.prototype)&&(R=function(){throw S("Incorrect invocation")},L))for(n in $)c[n]&&m(c[n],R);if((!L||!I||I===M)&&(I=R.prototype,L))for(n in $)c[n]&&m(c[n].prototype,I);if(L&&A(O)!==I&&m(O,I),s&&!p(I,j))for(n in D=!0,g(I,j,{get:function(){return l(this)?this[P]:void 0}}),$)c[n]&&h(c[n],P,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:D&&P,aTypedArray:N,aTypedArrayConstructor:B,exportTypedArrayMethod:F,exportTypedArrayStaticMethod:K,getTypedArrayConstructor:H,isView:Z,isTypedArray:U,TypedArray:R,TypedArrayPrototype:I}},9671:function(t,e,r){var n=r(9974),o=r(8361),i=r(7908),a=r(6244),s=function(t){var e=1==t;return function(r,s,c){var u,l,p=i(r),d=o(p),f=n(s,c),h=a(d);while(h-- >0)if(u=d[h],l=f(u,h,p),l)switch(t){case 0:return u;case 1:return h}return e?-1:void 0}};t.exports={findLast:s(0),findLastIndex:s(1)}},648:function(t,e,r){var n=r(1694),o=r(614),i=r(4326),a=r(5112),s=a("toStringTag"),c=Object,u="Arguments"==i(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(r){}};t.exports=n?i:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=l(e=c(t),s))?r:u?i(e):"Object"==(n=i(e))&&o(e.callee)?"Arguments":n}},8544:function(t,e,r){var n=r(7293);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},9974:function(t,e,r){var n=r(1702),o=r(9662),i=r(4374),a=n(n.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?a(t,e):function(){return t.apply(e,arguments)}}},9518:function(t,e,r){var n=r(2597),o=r(614),i=r(7908),a=r(6200),s=r(8544),c=a("IE_PROTO"),u=Object,l=u.prototype;t.exports=s?u.getPrototypeOf:function(t){var e=i(t);if(n(e,c))return e[c];var r=e.constructor;return o(r)&&e instanceof r?r.prototype:e instanceof u?l:null}},7674:function(t,e,r){var n=r(1702),o=r(9670),i=r(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{t=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),t(r,[]),e=r instanceof Array}catch(a){}return function(r,n){return o(r),i(n),e?t(r,n):r.__proto__=n,r}}():void 0)},4590:function(t,e,r){var n=r(3002),o=RangeError;t.exports=function(t,e){var r=n(t);if(r%e)throw o("Wrong offset");return r}},3002:function(t,e,r){var n=r(9303),o=RangeError;t.exports=function(t){var e=n(t);if(e<0)throw o("The argument can't be less than 0");return e}},1694:function(t,e,r){var n=r(5112),o=n("toStringTag"),i={};i[o]="z",t.exports="[object z]"===String(i)},8675:function(t,e,r){"use strict";var n=r(260),o=r(6244),i=r(9303),a=n.aTypedArray,s=n.exportTypedArrayMethod;s("at",(function(t){var e=a(this),r=o(e),n=i(t),s=n>=0?n:r+n;return s<0||s>=r?void 0:e[s]}))},2958:function(t,e,r){"use strict";var n=r(260),o=r(9671).findLastIndex,i=n.aTypedArray,a=n.exportTypedArrayMethod;a("findLastIndex",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},3408:function(t,e,r){"use strict";var n=r(260),o=r(9671).findLast,i=n.aTypedArray,a=n.exportTypedArrayMethod;a("findLast",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},3462:function(t,e,r){"use strict";var n=r(7854),o=r(6916),i=r(260),a=r(6244),s=r(4590),c=r(7908),u=r(7293),l=n.RangeError,p=n.Int8Array,d=p&&p.prototype,f=d&&d.set,h=i.aTypedArray,y=i.exportTypedArrayMethod,g=!u((function(){var t=new Uint8ClampedArray(2);return o(f,t,{length:1,0:3},1),3!==t[1]})),v=g&&i.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var t=new p(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));y("set",(function(t){h(this);var e=s(arguments.length>1?arguments[1]:void 0,1),r=c(t);if(g)return o(f,this,r,e);var n=this.length,i=a(r),u=0;if(i+e>n)throw l("Wrong length");while(u<i)this[e+u]=r[u++]}),!g||v)},1118:function(t,e,r){r(2958)},7380:function(t,e,r){r(3408)},4471:function(t,e,r){"use strict";r.d(e,{Ax:function(){return c},ZP:function(){return u},_q:function(){return o}});var n=r(4720);const o=/(https?):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/;function i(t){return new Promise(((e,r)=>{const n=new XMLHttpRequest;n.timeout=6e3;let o=c(t.url);"GET"===t.method&&(o+=`${a(t.data)}`),n.open(t.method,o),n.ontimeout=r,n.onerror=r,n.onload=t=>{e(t.target.response)},n.send(JSON.stringify(s(t.data,t.paramType)))}))}function a(t){let e="";return t.forEach((t=>{t[0]&&(e+=`&${t[0]}=${t[1]}`)})),e?"?"+e:""}function s(t,e){if(!t)return"";if("array"===e)return t;const r={};return t.forEach((t=>{t[0]&&(r[t[0]]=t[1])})),r}function c(t){return t.startsWith("http")?t:"https://"+t}function u(t,e,r,a="object"){let s,u=0;const l=t?.url;return(l&&!/^\d+$/.test(l)||o.test(c(l)))&&(t.series?s=setInterval((()=>{0!=t.requestCount&&t.requestCount<=u?clearInterval(s):(u++,i(t,a).then((t=>{e[r]="object"===a||"array"===a?JSON.parse(t):t})).catch((t=>n.Message.error(t?.message||t))))}),t.time):i(t,a).then((t=>{e[r]="object"===a||"array"===a?JSON.parse(t):t})).catch((t=>n.Message.error(t?.message||t)))),function(){clearInterval(s)}}}}]);
//# sourceMappingURL=641.48cc7160.js.map